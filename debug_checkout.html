<!DOCTYPE html>
<html>
<head>
    <title>Debug Checkout Calculation</title>
</head>
<body>
    <h1>Debug Checkout Calculation</h1>
    <button onclick="testCalculation()">Test Calculation</button>
    <div id="result"></div>

    <script>
        async function testCalculation() {
            const testData = {
                items: [
                    {
                        product_id: "test-product-id", // Replace with actual product ID
                        variant_id: null,
                        quantity: 1
                    }
                ],
                shippingAddress: {
                    country: "Australia",
                    state: "NSW",
                    postcode: "2000"
                }
            };

            try {
                const response = await fetch('https://kazatbfpvpalauoshzti.supabase.co/functions/v1/calculate-order-total', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImthemF0YmZwdnBhbGF1b3NoenRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MjU1NjksImV4cCI6MjA3NTUwMTU2OX0.r5n67JGpY7yw1pHGP7KAi9wA7_MhsiiYE-nWgYr_bj0'
                    },
                    body: JSON.stringify(testData)
                });

                const result = await response.json();
                document.getElementById('result').innerHTML = `
                    <h2>Response:</h2>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                    <p>Status: ${response.status}</p>
                `;
            } catch (error) {
                document.getElementById('result').innerHTML = `
                    <h2>Error:</h2>
                    <p>${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>
